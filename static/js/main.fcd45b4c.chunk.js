(this["webpackJsonpnews-explorer-frontend"]=this["webpackJsonpnews-explorer-frontend"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(20),o=n.n(s),r=n(5),i=(n(32),n(2)),l=n(3),d="https://morning-paper.students.nomoreparties.site";function j(e){if(e.ok)return console.log("res"),e.json();Promise.reject("Error!"+e.statusText)}function u(e){return fetch(d+"/articles/"+e,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},method:"DELETE"}).then((function(e){console.log("response",e),j(e)}))}var h=function(e){var t=window.matchMedia(e),n=Object(a.useState)(t.matches),c=Object(i.a)(n,2),s=c[0],o=c[1];return Object(a.useEffect)((function(){var e=function(e){return o(e.matches)};return t.addListener(e),function(){return t.removeListener(e)}})),s},b=(n(16),n(0));var m=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)(!1),r=Object(i.a)(o,2),l=r[0],j=r[1],m=Object(a.useState)(!1),O=Object(i.a)(m,2),_=O[0],g=O[1],x=h("(max-width: 750px)");return Object(b.jsxs)("li",{className:"card",children:[Object(b.jsx)("div",{className:"card__top-left_container",children:Object(b.jsx)("div",{className:"card__tag_container",children:Object(b.jsx)("p",{className:"card__tag_text",children:e.keyword})})}),Object(b.jsxs)("div",{className:"card__top-right_container",children:[_&&!e.loggedIn&&!x&&Object(b.jsx)("div",{className:"card__hoverbox",children:Object(b.jsx)("p",{className:"card__hoverbox-text",children:"Sign in to save articles"})}),Object(b.jsx)("div",{className:"card___container"}),Object(b.jsx)("div",{className:"card__icon-text_container",onMouseEnter:function(){return g(!0)},onMouseLeave:function(){return g(!1)},children:Object(b.jsx)("button",{className:"card__save-btn ".concat(l?"card__save-btn_saved":null),onClick:function(t){console.log(c),t.preventDefault(),l?u(c).then((function(){j(!1)})).catch((function(e){return console.log(e)})):function(e){var t=e.keyword,n=e.title,a=e.text,c=e.date,s=e.source,o=e.link,r=e.image;return fetch(d+"/articles",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},method:"POST",body:JSON.stringify({keyword:t,title:n,text:a,date:c,source:s,link:o,image:r})}).then((function(e){if(console.log("what is res",e),e.ok)return console.log("res"),e.json();Promise.reject("Error!"+e.statusText)}))}({keyword:e.keyword,title:e.title,text:e.text,date:e.date,source:e.source,link:e.link,image:e.image}).then((function(e){s(e._id),j(!0)}))},disabled:!e.loggedIn})})]}),Object(b.jsx)("img",{src:e.image,className:"card__pic",alt:"test card"}),Object(b.jsxs)("div",{className:"card__text",children:[Object(b.jsx)("p",{className:"card__date",children:function(){var t=e.date,n=null===t||void 0===t?void 0:t.slice(0,10),a=new Date(n);return"".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()]," ").concat(a.getDate(),",  ").concat(a.getFullYear())}()}),Object(b.jsx)("h2",{className:"card__title",children:e.title}),Object(b.jsx)("p",{className:"card__paragraph",children:e.text}),Object(b.jsx)("p",{className:"card__source",children:e.source})]})]})};n(17);function O(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)(!0),r=Object(i.a)(o,2),l=r[0],d=r[1],j=Object(a.useState)(3),u=Object(i.a)(j,2),h=u[0],O=u[1];return Object(a.useLayoutEffect)((function(){var t,n;s(null===(t=e.cards)||void 0===t?void 0:t.slice(0,h)),(null===(n=e.cards)||void 0===n?void 0:n.length)<h?d(!1):d(!0)}),[e.cards,h]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{className:"search__title",children:"Search results"}),Object(b.jsxs)("section",{className:"cards",children:[Object(b.jsx)("ul",{className:"cards__list",children:null===c||void 0===c?void 0:c.map((function(t,n){return Object(b.jsx)(m,{keyword:e.keyword,buttonType:"card__save-btn",title:t.title,text:t.description,date:t.publishedAt,source:t.source.name,link:t.url,image:t.urlToImage,savedArticles:e.savedArticles,loggedIn:e.loggedIn,isSaved:e.isSaved,onCardLike:e.onCardLike},n)}))}),l&&Object(b.jsx)("button",{className:"search__show \n       ",onClick:function(){return O(h+5)},children:"Show more"})]})]})}var _=c.a.createContext(),g="header__title_black",x="header__title_white",f="header__container_white",p="header__container_transparent";var v=function(e){var t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-7);return fetch("".concat("https://nomoreparties.co/news/v2/everything","?q=").concat(e,"&from=").concat(n,"&to").concat(t,"&sortBy=popularity&pageSize=100&apiKey=").concat("af2333dae49940699539bd20bbcb969a"),{}).then((function(e){return function(e){if(e.ok)return e.json();Promise.reject("Error!"+e.statusText)}(e)})).then((function(e){return e.articles}))},N="https://morning-paper.students.nomoreparties.site";function S(e){if(e.ok)return e.json();Promise.reject("Error!"+e.statusText)}n(34);var k=function(e){return Object(b.jsx)("div",{className:"modal modal_type_".concat(e.name," ").concat(e.isOpen?"modal_open":""),children:Object(b.jsxs)("div",{className:"modal__container",children:[Object(b.jsx)("div",{className:"infotooltip",children:e.isItSuccess?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h1",{className:"infotooltip__message",children:[" ",'"Registration successfully completed."'," "]}),Object(b.jsxs)(r.b,{onClick:e.onSignIn,className:"infotooltip__link",to:"main",children:["Sign in"," "]})]}):Object(b.jsxs)("h1",{className:"infotooltip__message",children:['"Oops, something went wrong! Please try again."'," "]})}),Object(b.jsx)("button",{"aria-label":"Close Button",type:"reset",className:"modal__close-button modal__close-button_".concat(e.name),onClick:e.onClose})]})})};n(43);function w(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"nothing-found\n    ",children:[Object(b.jsx)("div",{className:"nothing-found__pic"}),Object(b.jsx)("h2",{className:"nothing-found__title",children:e.noResults&&!e.resultError?"Nothing found":"Something went wrong"}),Object(b.jsx)("p",{className:"nothing-found__subtitle",children:e.noResults&&!e.resultError?"Sorry, but nothing matched your search terms.":"Sorry, something went wrong during the request. There may be a connection issue or the server may be down. Please try again later."})]})})}n(44);function y(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"preloader\n    ",children:[Object(b.jsx)("div",{className:"circle-preloader_container",children:Object(b.jsx)("i",{className:"circle-preloader"})}),Object(b.jsx)("p",{className:"preloader__subtitle",children:"Searching for news..."})]})})}n(18);var C=function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("label",{htmlFor:e.name,className:"form__input-title",children:e.name}),Object(b.jsx)("input",{required:!0,id:e.name+"-"+e.form,minLength:e.minlength,maxLength:e.maxlength,className:"form__input",type:e.type,name:e.name,value:e.value,onChange:e.handleChange,placeholder:e.placeholderText}),Object(b.jsxs)("span",{className:"form__input-error ".concat(e.valid?"":"form__input-error_visible"),id:"name-input-error",children:[e.errorText," "]})]})};function I(e){return Object(b.jsx)("div",{className:"modal  ".concat(e.isOpen?"modal_open":""),children:Object(b.jsx)("div",{className:"modal__container",children:Object(b.jsxs)("form",{onSubmit:e.handleSubmit,action:"#",className:"form",noValidate:!0,children:[Object(b.jsx)("h2",{className:"form__title ",children:e.title}),e.children,Object(b.jsx)("button",{"aria-label":"Close Button",type:"reset",className:"modal__close-button ",onClick:e.onClose}),Object(b.jsx)("button",{value:e.buttonText,type:"submit",className:"form__button ".concat(e.valid?"":"form__button_disabled"),disabled:!e.valid,children:e.buttonText}),Object(b.jsx)("div",{className:"form__link_container",children:Object(b.jsxs)("span",{className:"form__link-span",children:["or"," ",Object(b.jsx)("button",{onClick:e.linkClick,className:"form__link",children:e.link})]})})]})})})}function T(e){var t=Object(a.useState)(!0),n=Object(i.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)(""),r=Object(i.a)(o,2),l=r[0],d=r[1],j=Object(a.useState)(!0),u=Object(i.a)(j,2),h=u[0],m=u[1],O=Object(a.useState)(""),_=Object(i.a)(O,2),g=_[0],x=_[1],f=Object(a.useState)(!1),p=Object(i.a)(f,2),v=p[0],N=p[1],S=Object(a.useState)(""),k=Object(i.a)(S,2),w=k[0],y=k[1],T=Object(a.useState)(!0),E=Object(i.a)(T,2),P=E[0],F=E[1];function B(e){F(e.target.closest("form").checkValidity())}return Object(b.jsxs)(I,{isOpen:e.isRegisterPopupOpen,buttonText:"Sign up",onClose:e.onClose,title:"Sign up",link:"Sign in",linkClick:e.linkClick,handleSubmit:function(t){t.preventDefault(),e.handleSubmit({email:l,password:w,name:g}),d(""),y(""),x("")},valid:P,message:e.message,children:[Object(b.jsx)(C,{type:"email",name:"Email",form:"sign-up",handleChange:function(e){d(e.target.value),s(function(e){return/\S+@\S+\.\S+/.test(e)}(l)),B(e)},errorText:"Invalid email address",placeholderText:"Enter email",valid:c,minlength:"2",noValidate:!0,value:l,maxlength:"40"}),Object(b.jsx)(C,{minlength:"2",valid:v,errorText:"Password requires additional characters",noValidate:!0,value:w,maxlength:"200",type:"password",name:"Password",form:"sign-up",handleChange:function(e){y(e.target.value),w.length>6?N(!0):N(!1),B(e)},placeholderText:"Enter Password"}),Object(b.jsx)(C,{minlength:"2",errorText:"name required",noValidate:!0,value:g,maxlength:"200",type:"text",name:"Name",form:"sign-up",handleChange:function(e){x(e.target.value),m(!0),B(e)},valid:h,placeholderText:"Enter Name"})]})}function E(e){var t=Object(a.useState)(!0),n=Object(i.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)(""),r=Object(i.a)(o,2),l=r[0],d=r[1],j=Object(a.useState)(!1),u=Object(i.a)(j,2),h=u[0],m=u[1],O=Object(a.useState)(""),_=Object(i.a)(O,2),g=_[0],x=_[1],f=Object(a.useState)(!1),p=Object(i.a)(f,2),v=p[0],N=p[1];function S(e){N(e.target.closest("form").checkValidity())}return Object(b.jsxs)(I,{isOpen:e.isLoginPopupOpen,buttonText:"Sign in",onClose:e.onClose,title:"Sign in",link:"Sign up",linkClick:e.linkClick,handleSubmit:function(t){t.preventDefault(),e.handleSubmit({email:l,password:g}),d(""),x("")},valid:v,message:e.message,children:[Object(b.jsx)(C,{type:"email",name:"Email",form:"sign-in",handleChange:function(e){d(e.target.value),s(function(e){return/\S+@\S+\.\S+/.test(e)}(l)),S(e)},errorText:"Invalid email address",valid:c,placeholderText:"Enter email",minlength:"2",noValidate:!0,value:l,maxlength:"40"}),Object(b.jsx)(C,{type:"password",name:"Password",form:"sign-in",handleChange:function(e){x(e.target.value),g.length>7&&m(!0),S(e)},placeholderText:"Enter Password",valid:h,minlength:"2",errorText:"Password requires additional characters",noValidate:!0,value:g,maxlength:"200"})]})}n(45);function P(e){return Object(b.jsx)("header",{className:"header ",children:Object(b.jsxs)("div",{className:"header__container ".concat(e.headerBg),children:[Object(b.jsx)("p",{className:"header__title ".concat(e.headerTitle),children:"NewsExplorer"}),Object(b.jsx)("div",{className:"header__nav",children:e.children})]})})}n(46);var F=n.p+"static/media/avatar.b0b75056.png";var B=function(){return Object(b.jsx)("section",{className:"about",children:Object(b.jsxs)("div",{className:"about_container",children:[Object(b.jsx)("img",{src:F,alt:"avatar",className:"about__pic"}),Object(b.jsxs)("div",{className:"about__text",children:[Object(b.jsx)("h2",{className:"about__text-title",children:"About the author"}),Object(b.jsx)("p",{className:"about__text-body",children:"This block describes the project author. Here you should indicate your name, what you do, and which development technologies you know."}),Object(b.jsx)("p",{className:"about__text-body",children:"You can also talk about your experience with Practicum, what you learned there, and how you can help potential customers."})]})]})})},L=(n(47),n(22)),D=n(23),A=n(27),M=n(25),J=(n(48),function(e){Object(A.a)(n,e);var t=Object(M.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsxs)("div",{className:"footer__container",children:[Object(b.jsx)("div",{className:"footer__copyright_container",children:Object(b.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Supersite, Powered by News API"})}),Object(b.jsxs)("nav",{className:"footer__content",children:[Object(b.jsxs)("ul",{className:"footer__links_container",children:[Object(b.jsx)("li",{className:"footer__links-item",children:Object(b.jsx)(r.b,{className:"footer__link",to:"/",children:Object(b.jsx)("p",{className:"footer__links",children:"Home"})})}),Object(b.jsx)("li",{className:"footer__links-item",children:Object(b.jsx)("a",{className:"footer__link",href:"https://practicum.yandex.com/",target:"_",rel:"noreferrer",children:Object(b.jsx)("p",{className:"footer__links",children:"Practicum by Yandex"})})})]}),Object(b.jsxs)("ul",{className:"footer__links_container footer__links_container_social",children:[Object(b.jsx)("li",{className:"footer__links-item",children:Object(b.jsx)("a",{href:"https://www.facebook.com/",target:"_",rel:"noreferrer",children:Object(b.jsx)("div",{className:"footer__social-icon footer__social-icon_facebook "})})}),Object(b.jsx)("li",{className:"footer__links-item",children:Object(b.jsx)("a",{href:"https://github.com/",target:"_",rel:"noreferrer",children:Object(b.jsx)("div",{className:"footer__social-icon footer__social-icon_github"})})})]})]})]})})}}]),n}(c.a.Component));n(49);var R=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)(!0),r=Object(i.a)(o,2),l=r[0],d=r[1],j=document.querySelector(".search-bar__input");function u(){j.style.pointerEvents="auto",j.disabled=!1}return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("section",{className:"search-form",children:Object(b.jsxs)("div",{className:"search-form_container",children:[Object(b.jsx)("h1",{className:"search-form__title",children:"What's going on in the world?"}),Object(b.jsx)("p",{className:"search-form__subtitle",children:"Find the latest news on any topic and save them in your personal account."}),Object(b.jsxs)("div",{className:"search-bar__container",children:[Object(b.jsxs)("form",{className:"search-bar__form",onSubmit:function(t){t.preventDefault(),j.style.pointerEvents="none",j.disabled=!0,c?(e.onSearch(c),setTimeout(u,1e3),s("")):u()},children:[Object(b.jsx)("input",{onChange:function(e){s(e.target.value),""!==c&&(d(!0),document.querySelector(".search-bar__button").disabled=!1)},onFocus:function(){return d(!1)},className:"search-bar__input",placeholder:"Enter topic",value:c}),Object(b.jsx)("button",{className:"search-bar__button ".concat(l?"":"search-bar__button_disabled"),type:"submit",disabled:!0,children:"Search"})]}),Object(b.jsx)("span",{className:"form__input-error ".concat(l?"":"form__input-error_visible"),id:"name-input-error",children:"Please enter a keyword"})]})]})})})};n(50),n(19);function q(e){var t=e.loggedIn?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(r.b,{onClick:e.onClose,to:"/main",className:"navigator__link",children:"Home"}),Object(b.jsx)(r.b,{onClick:e.onClose,to:"/savedNewsPage",className:"navigator__link navigator__link_bottom",children:"Saved articles"})]}):Object(b.jsx)(r.b,{onClick:e.onClose,to:"/main",className:"navigator__link ",children:"Home"});return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"navigator ".concat(e.isOpen?"":"navigator_hidden"),children:[Object(b.jsx)(P,{headerTitle:x,headerBg:"header__container_black",children:Object(b.jsx)("button",{onClick:e.onNavBarClick,className:"header__icon ".concat("header__icon_x")})}),Object(b.jsx)("div",{className:"navigator_container",children:Object(b.jsx)("div",{className:"navigator__drawer ",children:Object(b.jsxs)("div",{className:"navigator__links",children:[t,Object(b.jsx)("button",{onClick:e.loggedIn?e.onLogOut:e.onSignIn,className:"header__button",children:e.loggedIn?"Log out":"Sign in"})]})})})]})})}n(51);function H(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("section",{className:"search",children:Object(b.jsx)("div",{className:"search__container",children:e.children})})})}function V(e){var t=c.a.useContext(_),n=h("(max-width: 750px)"),a=e.loggedIn?Object(b.jsx)(r.b,{onClick:e.onSavedNewsClick,to:"savedNewsPage",className:"header__saved-articles ",children:"Saved articles"}):null,s=e.loggedIn?Object(b.jsxs)("button",{onClick:e.onLogOut,className:"header__button header__button_white",children:[t.name,Object(b.jsx)("div",{className:"header__icon "})]}):Object(b.jsx)("button",{onClick:e.onSignIn,className:"header__button header__button_white header__button_sign-in",children:"Sign in"});return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("main",{className:"main",children:[Object(b.jsxs)("div",{className:"search-form__pic",children:[n?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(P,{headerTitle:x,headerBg:p,children:Object(b.jsx)("button",{onClick:e.onNavBarClick,className:"header__icon ".concat("header__icon_hamburger_white")})}),Object(b.jsx)(q,{isOpen:e.isOpen,onNavBarClick:e.onNavBarClick,onSignIn:e.onSignIn,isSaved:e.isSaved,loggedIn:e.loggedIn,onLogOut:e.onLogOut,onSavedNewsClick:e.onSavedNewsClick,onClose:e.onClose})]}):Object(b.jsxs)(P,{headerTitle:x,headerBg:p,children:[Object(b.jsx)("p",{className:"header__home header__home_underlined ",children:"Home"}),a,s]}),Object(b.jsx)(R,{onSearch:e.onSearch})]}),!e.noSearch&&Object(b.jsx)(H,{isSaved:e.isSaved,loggedIn:e.loggedIn,buttonType:"card__save-btn",children:e.children}),Object(b.jsx)(B,{}),Object(b.jsx)(J,{})]})})}var Y=n(10);n(52);var z=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),c=(n[0],n[1]),s=Object(a.useState)(!1),o=Object(i.a)(s,2),r=(o[0],o[1],Object(a.useState)(!1)),l=Object(i.a)(r,2),d=l[0],j=l[1],m=h("(max-width: 750px)");return Object(b.jsxs)("li",{className:"card",children:[Object(b.jsx)("div",{className:"card__top-left_container",children:Object(b.jsx)("div",{className:"card__tag_container",children:Object(b.jsx)("p",{className:"card__tag_text",children:e.keyword})})}),Object(b.jsxs)("div",{className:"card__top-right_container",children:[d&&!m&&Object(b.jsx)("div",{className:"card__hoverbox",children:Object(b.jsx)("p",{className:"card__hoverbox-text",children:"Remove from saved"})}),Object(b.jsx)("div",{className:"card___container"}),Object(b.jsx)("div",{className:"card__icon-text_container",onMouseEnter:function(){return j(!0)},onMouseLeave:function(){return j(!1)},children:Object(b.jsx)("button",{className:"card__delete-btn",onClick:function(t){t.preventDefault(),e.cardId&&(c(e.cardId),u(e.cardId).then((function(){e.onDelete(e.cardId)})).catch((function(e){return console.log(e)})))}})})]}),Object(b.jsx)("img",{src:e.image,className:"card__pic",alt:"test card"}),Object(b.jsxs)("div",{className:"card__text",children:[Object(b.jsx)("p",{className:"card__date",children:function(){var t=e.date,n=null===t||void 0===t?void 0:t.slice(0,10),a=new Date(n);return"".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()]," ").concat(a.getDate(),",  ").concat(a.getFullYear())}()}),Object(b.jsx)("h2",{className:"card__title",children:e.title}),Object(b.jsx)("p",{className:"card__paragraph",children:e.text}),Object(b.jsx)("p",{className:"card__source",children:e.source})]})]})};function G(e){return console.log("cards are saved",e.savedCards),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{className:"search__title",children:"Search results"}),Object(b.jsx)("section",{className:"cards",children:Object(b.jsx)("ul",{className:"cards__list",children:e.savedCards?e.savedCards.map((function(t,n){var a;return console.log("card id is ",t._id),Object(b.jsx)(z,(a={keyword:t.keyword,title:t.title,text:t.text,date:t.date,source:t.source,image:t.link},Object(Y.a)(a,"image",t.image),Object(Y.a)(a,"loggedIn",e.loggedIn),Object(Y.a)(a,"cardId",t._id),Object(Y.a)(a,"onDelete",e.onChange),a),n)})):null})})]})}n(53);function K(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"saved-articles\n    ",children:e.children})})}var W=function(e){var t=c.a.useContext(_),n=h("(max-width: 750px)"),s=Object(a.useState)([]),o=Object(i.a)(s,2),l=o[0],u=o[1],m=Object(a.useState)(0),O=Object(i.a)(m,2),x=O[0],p=O[1];return Object(a.useEffect)((function(){fetch(d+"/articles",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return j(e)})).then((function(e){u(e),p(e.length),console.log("res",e)})).catch((function(e){return console.log(e)}))}),[x]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"saved-news",children:[n?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(P,{headerTitle:g,headerBg:f,children:Object(b.jsx)("button",{onClick:e.onNavBarClick,className:"header__icon ".concat("header__icon_hamburger_black")})}),Object(b.jsx)(q,{isOpen:e.isOpen,onNavBarClick:e.onNavBarClick,onSignIn:e.onSignIn,isSaved:e.isSaved,loggedIn:e.loggedIn,onLogOut:e.onLogOut,onSavedNewsClick:e.onSavedNewsClick,onClose:e.onClose})]}):Object(b.jsxs)(P,{headerTitle:g,headerBg:f,children:[Object(b.jsx)(r.b,{onClick:e.onHomeClick,to:"/main",className:"header__home header__home_black",children:"Home"}),Object(b.jsx)("p",{className:"header__saved-articles header__saved-articles_underlined",children:"Saved articles"}),Object(b.jsxs)("button",{onClick:e.onLogOut,className:"header__button header__button_black",children:[t.name,Object(b.jsx)("div",{className:"header__icon header__icon_black"})]})]}),Object(b.jsxs)("div",{className:"saved-news__intro",children:[Object(b.jsx)("p",{className:"saved-news__subtitle",children:"Saved articles"}),Object(b.jsxs)("h1",{className:"saved-news__title",children:[t.name,", you have ",x," saved articles"]}),Object(b.jsxs)("p",{className:"saved-news__keywords",children:["By keywords:"," ",Object(b.jsx)("span",{className:"saved-news__keywords_span",children:function(){var e=[];l.forEach((function(t){e.push(t.keyword)}));var t=function(e){var t={};return e.forEach((function(e){t[e]=0})),e.filter((function(e){return 1===++t[e]})).sort((function(e,n){return t[n]-t[e]}))}(e),n=t.join(", ");return t.length<=3?n:t.slice(0,2).join(", ")+", and ".concat(t.length-2," others")}()})]})]}),Object(b.jsx)(K,{children:Object(b.jsx)(G,{loggedIn:!0,savedCards:l,onChange:function(e){console.log("hello");var t=l.filter((function(t){return t._id!==e}));u(t),p(x-1)}})}),Object(b.jsx)(J,{})]})})},Q=n(24),U=n(26),X=["component"],Z=function(e){var t=e.component,n=Object(U.a)(e,X);return Object(b.jsx)(l.b,{children:function(){return n.loggedIn?Object(b.jsx)(t,Object(Q.a)({},n)):Object(b.jsx)(l.a,{to:"/"})}})};n(54);var $=function(){var e=Object(l.g)(),t=localStorage.getItem("token"),n=Object(a.useState)([]),c=Object(i.a)(n,2),s=c[0],o=c[1],r=Object(a.useState)(!1),d=Object(i.a)(r,2),j=(d[0],d[1]),u=Object(a.useState)(!1),h=Object(i.a)(u,2),m=h[0],g=h[1],x=Object(a.useState)(!1),f=Object(i.a)(x,2),p=f[0],C=f[1],I=Object(a.useState)(!1),P=Object(i.a)(I,2),F=(P[0],P[1]),B=Object(a.useState)({}),L=Object(i.a)(B,2),D=L[0],A=L[1],M=Object(a.useState)(!1),J=Object(i.a)(M,2),R=J[0],q=J[1],H=Object(a.useState)(""),Y=Object(i.a)(H,2),z=(Y[0],Y[1],Object(a.useState)("")),G=Object(i.a)(z,2),K=(G[0],G[1],Object(a.useState)("")),Q=Object(i.a)(K,2),U=(Q[0],Q[1],Object(a.useState)("")),X=Object(i.a)(U,2),$=X[0],ee=X[1],te=Object(a.useState)(!1),ne=Object(i.a)(te,2),ae=ne[0],ce=ne[1],se=Object(a.useState)(!1),oe=Object(i.a)(se,2),re=oe[0],ie=oe[1],le=Object(a.useState)(!0),de=Object(i.a)(le,2),je=de[0],ue=de[1],he=Object(a.useState)(!1),be=Object(i.a)(he,2),me=be[0],Oe=be[1];function _e(e){e.preventDefault(),ue(!je)}function ge(){F(!0),g(!0),C(!1)}function xe(){ce(!0)}function fe(){console.log("logged out"),localStorage.removeItem("token"),e.push("/main"),q(!1),A({}),pe(),o([]),Ae(!1),qe(!0)}function pe(){j(!1),ce(!1),g(!1),C(!1),F(!1),ue(!0),o([]),Ae(!1),qe(!0)}console.log("jwt",t),console.log("app logged in?",R);var ve=Object(a.useState)(""),Ne=Object(i.a)(ve,2),Se=Ne[0],ke=Ne[1],we=Object(a.useState)(!0),ye=Object(i.a)(we,2),Ce=ye[0],Ie=ye[1],Te=Object(a.useState)(!1),Ee=Object(i.a)(Te,2),Pe=Ee[0],Fe=Ee[1],Be=Object(a.useState)(!1),Le=Object(i.a)(Be,2),De=Le[0],Ae=Le[1],Me=Object(a.useState)(!0),Je=Object(i.a)(Me,2),Re=Je[0],qe=Je[1],He=Object(a.useState)(!0),Ve=Object(i.a)(He,2),Ye=Ve[0],ze=Ve[1];return Object(a.useEffect)((function(){var t=localStorage.getItem("token");t&&(console.log("token",t),console.log("has token",t),function(e){return fetch(N+"/users/me",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(S).then((function(e){return e}))}(t).then((function(e){if(e)return A(e);ee("400 - one or more of the fields were not provided")})).then(q(!0)).then((function(){e.push("/main")})).catch((function(e){console.log(e.message)})))}),[e,R]),Object(a.useEffect)((function(){var t=localStorage.getItem("token");console.log(t),t&&e.push("/main")}),[e]),console.log("user",D.name),Object(b.jsx)("div",{className:"app",children:Object(b.jsxs)(_.Provider,{value:D,children:[Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{path:"/main",children:Object(b.jsxs)(V,{noSearch:Re,onSearch:function(e){qe(!1),ke(e),console.log("hello"),Ie(!1),Fe(!1),Ae(!1),ze(!0),v(e).then((function(e){console.log(e),o(e),ze(!1),console.log("length",e.length),0===e.length?Ie(!0):(Ie(!1),Ae(!0))})).catch((function(e){ze(!1),Fe(!0),console.log(e)}))},isSaved:me,isOpen:je,loggedIn:R,cards:s,component:V,onLogOut:fe,onSignIn:ge,onNavBarClick:_e,onSavedNewsClick:function(){Oe(!0),o([]),Ae(!1),qe(!0)},onClose:pe,keyword:Se,children:[Ce&&Object(b.jsx)(w,{noResults:!0,resultError:!1}),De&&Object(b.jsx)(O,{cards:s,keyword:Se,loggedIn:R}),Ye&&Object(b.jsx)(y,{}),Pe&&Object(b.jsx)(w,{noResults:!1,resultError:!0})]})}),Object(b.jsx)(l.b,{path:"/savedNewsPage",children:Object(b.jsx)(Z,{isSaved:me,onLogOut:fe,component:W,onNavBarClick:_e,isOpen:je,onHomeClick:function(){Oe(!1)},loggedIn:R,onClose:pe,signInRedirect:ge})}),Object(b.jsx)(l.b,{exact:!0,path:"/",children:R?Object(b.jsx)(l.a,{to:"/savedNewsPage"}):Object(b.jsx)(l.a,{to:"/main"})}),Object(b.jsx)(l.b,{path:"/*",children:Object(b.jsx)(l.a,{to:"/"})})]}),console.log("log",m),Object(b.jsx)(E,{isLoginPopupOpen:m,handleSubmit:function(t){var n=t.email,a=t.password;o([]),qe(!0),Ae(!1),console.log(re),n&&a||(ee("400 - one or more of the fields were not provided"),ie(!1),xe(),console.log("no email or password")),function(e,t){return fetch(N+"/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(S).then((function(e){if(e.token)return console.log(e.token),localStorage.setItem("token",e.token),e}))}(n,a).then((function(e){q(!0),A(e),console.log("user",e)})).then((function(){e.push("/main"),pe()})).catch((function(){ie(!1),ee("Oops, something went wrong! Please try again."),xe()}))},onClose:pe,linkClick:function(e){e.preventDefault(),F(!0),g(!1),C(!0)}}),Object(b.jsx)(T,{isRegisterPopupOpen:p,handleSubmit:function(e){var t=e.email,n=e.password,a=e.name;if(!n||!t||!a)return console.log("no email or password"),void console.log(t);(function(e,t,n){return fetch(N+"/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n})}).then(S).then((function(e){return e}))})(t,n,a).then((function(e){return ie(!0),C(!1),ee("Success! You have now been registered."),xe(),e})).catch((function(e){400===e.status?(ee("One of the fields was filled in incorrectly"),ie(!1),xe()):403===e.status&&(ee("This user already exists!"),ie(!1),xe())}))},onClose:pe,linkClick:function(e){e.preventDefault(),g(!0),C(!1),F(!0)}}),Object(b.jsx)(k,{isOpen:ae,isItSuccess:re,onClose:pe,onSignIn:function(){F(!0),g(!0),C(!1),ce(!1)},message:$})]})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),s(e),o(e)}))};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(r.a,{children:Object(b.jsx)($,{})})}),document.getElementById("root")),ee()}],[[55,1,2]]]);
//# sourceMappingURL=main.fcd45b4c.chunk.js.map